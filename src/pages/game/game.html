
<ion-header no-border>
    <ion-navbar color="dark" transparent>
        <ion-title>{{session !== null ? session.name : 'Loading...'}}</ion-title>
        <ion-buttons end class="back-button-md">
            <button ion-button icon-only (click)="showQr()">
                <ion-icon name="qr-scanner"></ion-icon>
            </button>
        </ion-buttons>
    </ion-navbar>
</ion-header>
<ion-content no-bounce>
    <div class="song-info" style="width: 90%; margin-bottom: 3%;">
        <img src="http://www.clker.com/cliparts/q/7/x/M/D/R/record-player-hi.png">
        <div class="song-info-content">
            <strong>{{playingInfo !== null && playingInfo !== undefined ? playingInfo.title : 'Nothing Playing'}}</strong>
            <br/>{{playingInfo !== null && playingInfo !== undefined ? playingInfo.artist : 'Start the party!'}}
        </div>
    </div>
    <div class="top-container">
        <div class="leader-board">
            <ion-card>
                <ion-card-header>
                  <p><strong>Leader Board</strong></p>  
                </ion-card-header>
                <ion-list>
                    <ion-item>
                        <ion-icon name="cart"></ion-icon>
                        {{playing !== null && playing !== undefined ? playing.userId : "ing now?"}}
                        <span>{{score1}}</span>
                    </ion-item>
                    <ion-item>
                        <ion-icon name="medical"></ion-icon>
                        Player 2
                        <span>{{score1}}</span>
                    </ion-item>
                    <ion-item>
                        <ion-icon name="cafe"></ion-icon>
                        Player 3
                        <span>Score 3</span>
                    </ion-item>
                </ion-list>
            </ion-card>
        </div>
        <canvas id="canvas" #canvas class="waveform"></canvas>
    </div>

    <div class="opponent-lyrics">
        <canvas id="lyrics" #lyrics></canvas>
    </div>

    <ion-card class="player-container">
        <ion-card-content>
            <ion-list>
                <button ion-item (click)="search()">
                    <img float-left class="search-record" src="http://www.clker.com/cliparts/q/7/x/M/D/R/record-player-hi.png" />
                    <div class="song-info" *ngIf="!loadingTrack">
                        <div class="song-info-content" style='color: #444' *ngIf="result === null">
                            <strong>No Song Selected</strong>
                            <br/>Click here to search
                        </div>
                        <div *ngIf="result !== null" class="song-info-content" style='color: #D056DB'>
                            <strong>{{result.title}}</strong>
                            <br/>{{result.artist}}
                        </div>
                    </div>
                    <div class="song-info" *ngIf="loadingTrack">
                        <div class="song-info-content">
                            <ion-spinner></ion-spinner>
                        </div>
                    </div>
                </button>
                <ion-item id="track-item" [class]="result === null ? 'hidden' : ''">
                    <canvas class="track" id="track" #track height="100px" width="100%"></canvas>
                </ion-item>
                <hr [hidden]="result === null" />
                <button [hidden]="result === null" ion-item icon-only (click)="submit()" class="submit" detail-none>
                    <ion-icon name="color-wand"></ion-icon>
                </button>
            </ion-list>
        </ion-card-content>
    </ion-card>
</ion-content>
<div [class]="'qr-code-container' + (qrVisible ? ' visible' : '')  + (qrHidden ? ' hidden' : '')">
    <div class="qr-code-container-inner">
        <qr-code [value]="sessionId" size="512"></qr-code>
        <button ion-button clear full (click)="hideQr()">Done</button>
    </div>
</div>